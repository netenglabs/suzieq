description: 'Testing verbs for device config: show'
tests:
- command: devconfig show --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  marks: devconfig show cumulus
  output: '[{"namespace": "ospf-ibgp", "config": "# hostname\nspine02\n# interfaces\nauto
    all\n\niface lo inet loopback\n\n# Management interface\n\niface eth0 inet dhcp\n    vrf
    mgmt\n\niface mgmt\n    address 127.0.0.1/8\n    vrf-table auto\n\n# downlinks\niface
    swp1\n    mtu 9216\niface swp2\n    mtu 9216\niface swp3\n    mtu 9216\niface
    swp4\n    mtu 9216\niface swp5\n    mtu 9216\niface swp6\n    mtu 9216\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname spine02\nservice integrated-vtysh-config\n!\ninterface
    lo\n ip address 10.0.0.21/32\n ip ospf area 0\n!\ninterface swp1\n ip address
    10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface swp2\n
    ip address 10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp3\n ip address 10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp4\n ip address 10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp5\n ip address 10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp6\n ip address 10.0.0.21/32\n ip ospf area 0\n ip ospf network point-to-point\n!\nrouter
    bgp 65000\n bgp router-id 10.0.0.21\n no bgp default ipv4-unicast\n bgp bestpath
    as-path multipath-relax\n neighbor RR peer-group\n neighbor RR remote-as internal\n
    neighbor RR bfd\n neighbor RR advertisement-interval 0\n neighbor RR timers 3
    10\n neighbor RR timers connect 5\n neighbor swp1 interface peer-group RR\n neighbor
    swp2 interface peer-group RR\n neighbor swp3 interface peer-group RR\n neighbor
    swp4 interface peer-group RR\n neighbor swp6 interface peer-group RR\n !\n address-family
    ipv4 unicast\n  neighbor RR activate\n  neighbor RR route-reflector-client\n  maximum-paths
    ibgp 16\n exit-address-family\n !\n address-family l2vpn evpn\n  neighbor RR activate\n  neighbor
    RR route-reflector-client\n exit-address-family\n!\nrouter ospf\n ospf router-id
    10.0.0.21\n passive-interface lo\n!\nline vty\n!\nend\n# ports.conf\n# resolv.conf\nnameserver
    192.168.123.1 # vrf mgmt", "hostname": "spine02", "timestamp": 1622008051074},
    {"namespace": "ospf-ibgp", "config": "# hostname\ninternet\n# interfaces\nauto
    lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet dhcp\n\nauto swp1\niface
    swp1\n\nauto swp2\niface swp2\nBuilding configuration...\n\nCurrent configuration:\n!\nfrr
    version 7.4+cl4.2.1u1\nfrr defaults datacenter\nhostname internet\nlog syslog
    informational\nservice integrated-vtysh-config\n!\ninterface lo\n ip address 10.0.0.253/32\n
    ip address 172.16.253.1/32\n!\ninterface swp1\n ip address 169.254.127.0/31\n!\ninterface
    swp2\n ip address 169.254.127.2/31\n!\nrouter bgp 25253\n bgp router-id 10.0.0.253\n
    no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n neighbor
    ISL peer-group\n neighbor ISL remote-as external\n neighbor ISL bfd\n neighbor
    swp1 interface peer-group ISL\n neighbor swp2 interface peer-group ISL\n !\n address-family
    ipv4 unicast\n  redistribute connected route-map LOOPBACKS\n  neighbor ISL activate\n  neighbor
    ISL default-originate\n exit-address-family\n!\nroute-map LOOPBACKS permit 10\n
    match interface lo\n!\nline vty\n!\nend\n# ports.conf\n# resolv.conf\nnameserver
    192.168.123.1", "hostname": "internet", "timestamp": 1622008051293}, {"namespace":
    "ospf-ibgp", "config": "# hostname\nleaf01\n# interfaces\nauto all\n\niface lo
    inet loopback\n  address 10.0.0.11/32\n  vxlan-local-tunnelip 10.0.0.11\n  clagd-vxlan-anycast-ip
    10.0.0.112\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table auto\n\niface eth0
    inet dhcp\n  vrf mgmt\n\n# uplinks\niface swp1\n  mtu 9216\n\niface swp2\n  mtu
    9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc on dev
    swp3\n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev swp4\n\niface
    peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.1/30\n  clagd-peer-ip 169.254.1.2\n  clagd-backup-ip 10.0.0.12\n  clagd-sys-mac
    44:39:39:ff:40:94\n  clagd-priority 100\n\n# bridge to hosts\niface swp5\n  post-up
    ip link set promisc on dev swp5\n  mtu 9000\n\niface swp6\n  post-up ip link set
    promisc on dev swp6\n  mtu 9000\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.11/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.11/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:94\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf01\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.11/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.11/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.11/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.11\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.11\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf01",
    "timestamp": 1622008051293}, {"namespace": "ospf-ibgp", "config": "# hostname\nexit01\n#
    interfaces\nauto all\n\niface lo inet loopback\n\taddress 10.0.0.101/32\n\tvxlan-local-tunnelip
    10.0.0.101\n\niface eth0 inet dhcp\n\tvrf mgmt\n\niface evpn-vrf\n\taddress 10.0.0.101/32\n\tvrf-table
    auto\n\niface mgmt\n\taddress 127.0.0.1/8\n\tvrf-table auto\n\niface internet-vrf\n\taddress
    10.0.0.101/32\n\tvrf-table auto\n\niface bridge\n\tbridge-vlan-aware yes\n\tbridge-vids
    4001\n\tbridge-ports vxlan4001\n\niface vlan4001\n        mtu 9216\n\tvlan-id
    4001\n\tvlan-raw-device bridge\n\tvrf evpn-vrf\n\niface swp1\n  mtu 9216\n\niface
    swp2\n  mtu 9216\n\niface swp5\n\niface swp5.2\n\niface swp5.3\n\tvrf evpn-vrf\n\niface
    swp5.4\n\tvrf internet-vrf\n\niface swp6\n\tvrf internet-vrf\n\niface vxlan4001\n        mtu
    9216\n\tvxlan-id 104001\n\tbridge-learning off\n\tbridge-access 4001\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname exit01\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface swp1\n ip address 10.0.0.101/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\ninterface swp2\n ip address
    10.0.0.101/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp5.2\n ip address 169.254.254.1/30\n!\ninterface swp5.3 vrf evpn-vrf\n ip address
    169.254.254.5/30\n!\ninterface swp5.4 vrf internet-vrf\n ip address 169.254.254.9/30\n!\ninterface
    swp6 vrf internet-vrf\n ip address 169.254.127.1/31\n!\ninterface lo\n ip ospf
    area 0\n!\nrouter bgp 65000\n bgp router-id 10.0.0.101\n no bgp default ipv4-unicast\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR timers connect 5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface
    peer-group RR\n neighbor swp5.2 interface remote-as external\n !\n address-family
    ipv4 unicast\n  redistribute ospf\n  neighbor RR activate\n  neighbor swp5.2 activate\n  maximum-paths
    ibgp 16\n exit-address-family\n !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n
    exit-address-family\n!\nrouter bgp 65000 vrf evpn-vrf\n bgp router-id 10.0.0.101\n
    no bgp default ipv4-unicast\n neighbor swp5.3 interface remote-as external\n !\n
    address-family ipv4 unicast\n  aggregate-address 172.16.1.0/24 summary-only\n  aggregate-address
    172.16.2.0/24 summary-only\n  neighbor swp5.3 activate\n exit-address-family\n
    !\n address-family l2vpn evpn\n  advertise ipv4 unicast\n exit-address-family\n!\nrouter
    bgp 65001 vrf internet-vrf\n bgp router-id 10.0.0.101\n no bgp default ipv4-unicast\n
    neighbor EDGE peer-group\n neighbor EDGE remote-as external\n neighbor EDGE bfd\n
    neighbor swp5.4 interface peer-group EDGE\n neighbor swp6 interface peer-group
    EDGE\n !\n address-family ipv4 unicast\n  neighbor EDGE activate\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.101\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "exit01",
    "timestamp": 1622008051294}, {"namespace": "ospf-ibgp", "config": "# hostname\nexit02\n#
    interfaces\nauto all\n\niface lo inet loopback\n\taddress 10.0.0.102/32\n\tvxlan-local-tunnelip
    10.0.0.102\n\niface eth0 inet dhcp\n\tvrf mgmt\n\niface evpn-vrf\n\taddress 10.0.0.102/32\n\tvrf-table
    auto\n\niface mgmt\n\taddress 127.0.0.1/8\n\tvrf-table auto\n\niface internet-vrf\n\taddress
    10.0.0.102/32\n\tvrf-table auto\n\niface bridge\n\tbridge-vlan-aware yes\n\tbridge-vids
    4001\n\tbridge-ports vxlan4001\n\niface vlan4001\n        mtu 9216\n\tvlan-id
    4001\n\tvlan-raw-device bridge\n\tvrf evpn-vrf\n\niface swp1\n  mtu 9216\n\niface
    swp2\n  mtu 9216\n\niface swp5\n\niface swp5.2\n\niface swp5.3\n\tvrf evpn-vrf\n\niface
    swp5.4\n\tvrf internet-vrf\n\niface swp6\n\tvrf internet-vrf\n\niface vxlan4001\n        mtu
    9216\n\tvxlan-id 104001\n\tbridge-learning off\n\tbridge-access 4001\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname exit02\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface swp1\n ip address 10.0.0.102/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\ninterface swp2\n ip address
    10.0.0.102/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp5.2\n ip address 169.254.253.1/30\n!\ninterface swp5.3 vrf evpn-vrf\n ip address
    169.254.253.5/30\n!\ninterface swp5.4 vrf internet-vrf\n ip address 169.254.253.9/30\n!\ninterface
    swp6 vrf internet-vrf\n ip address 169.254.127.3/31\n!\ninterface lo\n ip ospf
    area 0\n!\nrouter bgp 65000\n bgp router-id 10.0.0.102\n no bgp default ipv4-unicast\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n neighbor swp5.2 interface remote-as external\n !\n address-family ipv4 unicast\n  redistribute
    ospf\n  neighbor RR activate\n  neighbor swp5.2 activate\n  maximum-paths ibgp
    16\n exit-address-family\n !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n
    exit-address-family\n!\nrouter bgp 65000 vrf evpn-vrf\n bgp router-id 10.0.0.102\n
    no bgp default ipv4-unicast\n neighbor swp5.3 interface remote-as external\n !\n
    address-family ipv4 unicast\n  aggregate-address 172.16.1.0/24 summary-only\n  aggregate-address
    172.16.2.0/24 summary-only\n  neighbor swp5.3 activate\n exit-address-family\n
    !\n address-family l2vpn evpn\n  advertise ipv4 unicast\n exit-address-family\n!\nrouter
    bgp 65001 vrf internet-vrf\n bgp router-id 10.0.0.102\n no bgp default ipv4-unicast\n
    neighbor EDGE peer-group\n neighbor EDGE remote-as external\n neighbor EDGE bfd\n
    neighbor swp5.4 interface peer-group EDGE\n neighbor swp6 interface peer-group
    EDGE\n !\n address-family ipv4 unicast\n  neighbor EDGE activate\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.102\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "exit02",
    "timestamp": 1622008051294}, {"namespace": "ospf-ibgp", "config": "# hostname\nleaf02\n#
    interfaces\nauto all\n\niface lo inet loopback\n  address 10.0.0.12/32\n  vxlan-local-tunnelip
    10.0.0.12\n  clagd-vxlan-anycast-ip 10.0.0.112\n\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table
    auto\n\niface eth0 inet dhcp\n  vrf mgmt\n\n\n# uplinks\niface swp1\n  mtu 9216\n  \niface
    swp2\n  mtu 9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc
    on dev swp3\n  \n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev
    swp4\n\niface peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.2/30\n  clagd-peer-ip 169.254.1.1\n  clagd-backup-ip 10.0.0.11\n  clagd-sys-mac
    44:39:39:ff:40:94\n  clagd-priority 200\n\n# bridge to hosts\niface swp5\n  mtu
    9000\n  post-up ip link set promisc on dev swp5\n\niface swp6\n  mtu 9000\n  post-up
    ip link set promisc on dev swp6\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.12/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.12/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:94\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf02\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.12/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.12/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.12/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.12\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.12\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf02",
    "timestamp": 1622008051294}, {"namespace": "ospf-ibgp", "config": "# hostname\nleaf03\n#
    interfaces\nauto all\n\niface lo inet loopback\n  address 10.0.0.13/32\n  vxlan-local-tunnelip
    10.0.0.13\n  clagd-vxlan-anycast-ip 10.0.0.134\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table
    auto\n\niface eth0 inet dhcp\n  vrf mgmt\n\n# uplinks\niface swp1\n  mtu 9216\n\niface
    swp2\n  mtu 9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc
    on dev swp3\n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev swp4\n\niface
    peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.1/30\n  clagd-peer-ip 169.254.1.2\n  clagd-backup-ip 10.0.0.14\n  clagd-sys-mac
    44:39:39:ff:40:95\n  clagd-priority 100\n\n# bridge to hosts\niface swp5\n  post-up
    ip link set promisc on dev swp5\n  mtu 9000\n\niface swp6\n  post-up ip link set
    promisc on dev swp6\n  mtu 9000\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.13/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.13/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:95\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf03\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.13/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.13/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.13/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.13\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.13\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf03",
    "timestamp": 1622008051479}, {"namespace": "ospf-ibgp", "config": "# hostname\nleaf04\n#
    interfaces\nauto all\n\niface lo inet loopback\n  address 10.0.0.14/32\n  vxlan-local-tunnelip
    10.0.0.14\n  clagd-vxlan-anycast-ip 10.0.0.134\n\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table
    auto\n\niface eth0 inet dhcp\n  vrf mgmt\n\n\n# uplinks\niface swp1\n  mtu 9216\n  \niface
    swp2\n  mtu 9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc
    on dev swp3\n  \n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev
    swp4\n\niface peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.2/30\n  clagd-peer-ip 169.254.1.1\n  clagd-backup-ip 10.0.0.13\n  clagd-sys-mac
    44:39:39:ff:40:95\n  clagd-priority 200\n\n# bridge to hosts\niface swp5\n  mtu
    9000\n  post-up ip link set promisc on dev swp5\n\niface swp6\n  mtu 9000\n  post-up
    ip link set promisc on dev swp6\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.14/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.14/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:95\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf04\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.14/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.14/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.14/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.14\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.14\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf04",
    "timestamp": 1622008051479}, {"namespace": "ospf-ibgp", "config": "# hostname\nspine01\n#
    interfaces\nauto all\n\niface lo inet loopback\n\n# Management interface\n\niface
    eth0 inet dhcp\n    vrf mgmt\n\niface mgmt\n    address 127.0.0.1/8\n    vrf-table
    auto\n\n# downlinks\niface swp1\n    mtu 9216\niface swp2\n    mtu 9216\niface
    swp3\n    mtu 9216\niface swp4\n    mtu 9216\niface swp5\n    mtu 9216\niface
    swp6\n    mtu 9216\n\nBuilding configuration...\n\nCurrent configuration:\n!\nfrr
    version 7.4+cl4.2.1u1\nfrr defaults datacenter\nhostname spine01\nservice integrated-vtysh-config\n!\ninterface
    lo\n ip address 10.0.0.22/32\n ip ospf area 0\n!\ninterface swp1\n ip address
    10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface swp2\n
    ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp3\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp4\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp5\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp6\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\nrouter
    bgp 65000\n bgp router-id 10.0.0.22\n no bgp default ipv4-unicast\n bgp bestpath
    as-path multipath-relax\n neighbor RR peer-group\n neighbor RR remote-as internal\n
    neighbor RR bfd\n neighbor RR advertisement-interval 0\n neighbor RR timers 3
    10\n neighbor RR timers connect 5\n neighbor swp1 interface peer-group RR\n neighbor
    swp2 interface peer-group RR\n neighbor swp3 interface peer-group RR\n neighbor
    swp4 interface peer-group RR\n neighbor swp5 interface peer-group RR\n neighbor
    swp6 interface peer-group RR\n !\n address-family ipv4 unicast\n  neighbor RR
    activate\n  neighbor RR route-reflector-client\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  neighbor RR route-reflector-client\n
    exit-address-family\n!\nrouter ospf\n ospf router-id 10.0.0.22\n passive-interface
    lo\n!\nline vty\n!\nend\n# ports.conf\n# resolv.conf\nnameserver 192.168.123.1
    # vrf mgmt", "hostname": "spine01", "timestamp": 1622008051479}]'
- command: devconfig show --hostname=leaf01 --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  marks: devconfig show cumulus
  output: '[{"namespace": "ospf-ibgp", "config": "# hostname\nleaf01\n# interfaces\nauto
    all\n\niface lo inet loopback\n  address 10.0.0.11/32\n  vxlan-local-tunnelip
    10.0.0.11\n  clagd-vxlan-anycast-ip 10.0.0.112\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table
    auto\n\niface eth0 inet dhcp\n  vrf mgmt\n\n# uplinks\niface swp1\n  mtu 9216\n\niface
    swp2\n  mtu 9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc
    on dev swp3\n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev swp4\n\niface
    peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.1/30\n  clagd-peer-ip 169.254.1.2\n  clagd-backup-ip 10.0.0.12\n  clagd-sys-mac
    44:39:39:ff:40:94\n  clagd-priority 100\n\n# bridge to hosts\niface swp5\n  post-up
    ip link set promisc on dev swp5\n  mtu 9000\n\niface swp6\n  post-up ip link set
    promisc on dev swp6\n  mtu 9000\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.11/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.11/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:94\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf01\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.11/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.11/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.11/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.11\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.11\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf01",
    "timestamp": 1622008051293}]'
- command: devconfig show --hostname='leaf01 spine01' --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  marks: devconfig show cumulus
  output: '[{"namespace": "ospf-ibgp", "config": "# hostname\nleaf01\n# interfaces\nauto
    all\n\niface lo inet loopback\n  address 10.0.0.11/32\n  vxlan-local-tunnelip
    10.0.0.11\n  clagd-vxlan-anycast-ip 10.0.0.112\n\niface mgmt\n  address 127.0.0.1/8\n  vrf-table
    auto\n\niface eth0 inet dhcp\n  vrf mgmt\n\n# uplinks\niface swp1\n  mtu 9216\n\niface
    swp2\n  mtu 9216\n\n# uplinks\niface swp3\n  mtu 9000\n  post-up ip link set promisc
    on dev swp3\n\niface swp4\n  mtu 9000\n  post-up ip link set promisc on dev swp4\n\niface
    peerlink\n  mtu 9000\n  bond-slaves swp3 swp4\n\niface peerlink.4094\n  address
    169.254.1.1/30\n  clagd-peer-ip 169.254.1.2\n  clagd-backup-ip 10.0.0.12\n  clagd-sys-mac
    44:39:39:ff:40:94\n  clagd-priority 100\n\n# bridge to hosts\niface swp5\n  post-up
    ip link set promisc on dev swp5\n  mtu 9000\n\niface swp6\n  post-up ip link set
    promisc on dev swp6\n  mtu 9000\n\niface bond01\n  mtu 9000\n  bond-slaves swp5\n  bridge-access
    13\n  clag-id 1\n\niface bond02\n  mtu 9000\n  bond-slaves swp6\n  bridge-access
    24\n  clag-id 2\n\n# Define the bridge for STP\niface bridge\n  bridge-vlan-aware
    yes\n  # bridge-ports includes all ports related to VxLAN and CLAG.\n  # does
    not include the Peerlink.4094 subinterface\n  bridge-ports bond01 bond02 peerlink
    vni13 vni24 vxlan4001\n  bridge-vids 13 24\n\n# VxLAN Tunnel for Server1-Server3
    (Vlan 13)\niface vni13\n  mtu 9000\n  vxlan-id 13\n  bridge-access 13\n  bridge-learning
    off\n\n#VxLAN Tunnel for Server2-Server4 (Vlan 24)\niface vni24\n  mtu 9000\n  vxlan-id
    24\n  bridge-access 24\n  bridge-learning off\n  bridge-arp-nd-suppress on\n\niface
    vxlan4001\n    mtu 9216\n    vxlan-id 104001\n    bridge-learning off\n    bridge-access
    4001\n\niface evpn-vrf\n   vrf-table auto\n\n#Tenant SVIs - anycast GW\n\niface
    vlan13\n    mtu 9000\n    address 172.16.1.11/24\n    address-virtual 44:39:39:ff:00:13
    172.16.1.1/24\n    vlan-id 13\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\niface
    vlan24\n    mtu 9000\n    address 172.16.2.11/24\n    address-virtual 44:39:39:ff:00:24
    172.16.2.1/24\n    vlan-id 24\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\n#L3
    VLAN interface per tenant (for L3 VNI)\n\niface vlan4001\n    mtu 9216\n    hwaddress
    44:39:39:ff:40:94\n    vlan-id 4001\n    vlan-raw-device bridge\n    vrf evpn-vrf\n\nBuilding
    configuration...\n\nCurrent configuration:\n!\nfrr version 7.4+cl4.2.1u1\nfrr
    defaults datacenter\nhostname leaf01\nservice integrated-vtysh-config\n!\nvrf
    evpn-vrf\n vni 104001\n exit-vrf\n!\ninterface lo\n ip address 10.0.0.11/32\n
    ip ospf area 0\n!\ninterface swp1\n ip address 10.0.0.11/32\n ip ospf area 0\n
    ip ospf network point-to-point\n!\ninterface swp2\n ip address 10.0.0.11/32\n
    ip ospf area 0\n ip ospf network point-to-point\n!\nrouter bgp 65000\n bgp router-id
    10.0.0.11\n no bgp default ipv4-unicast\n bgp bestpath as-path multipath-relax\n
    neighbor RR peer-group\n neighbor RR remote-as internal\n neighbor RR bfd\n neighbor
    RR advertisement-interval 0\n neighbor RR timers 3 10\n neighbor RR timers connect
    5\n neighbor swp1 interface peer-group RR\n neighbor swp2 interface peer-group
    RR\n !\n address-family ipv4 unicast\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  advertise-all-vni\n exit-address-family\n!\nrouter
    ospf\n ospf router-id 10.0.0.11\n passive-interface lo\n!\nline vty\n!\nend\n#
    ports.conf\n# resolv.conf\nnameserver 192.168.123.1 # vrf mgmt", "hostname": "leaf01",
    "timestamp": 1622008051293}, {"namespace": "ospf-ibgp", "config": "# hostname\nspine01\n#
    interfaces\nauto all\n\niface lo inet loopback\n\n# Management interface\n\niface
    eth0 inet dhcp\n    vrf mgmt\n\niface mgmt\n    address 127.0.0.1/8\n    vrf-table
    auto\n\n# downlinks\niface swp1\n    mtu 9216\niface swp2\n    mtu 9216\niface
    swp3\n    mtu 9216\niface swp4\n    mtu 9216\niface swp5\n    mtu 9216\niface
    swp6\n    mtu 9216\n\nBuilding configuration...\n\nCurrent configuration:\n!\nfrr
    version 7.4+cl4.2.1u1\nfrr defaults datacenter\nhostname spine01\nservice integrated-vtysh-config\n!\ninterface
    lo\n ip address 10.0.0.22/32\n ip ospf area 0\n!\ninterface swp1\n ip address
    10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface swp2\n
    ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp3\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp4\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp5\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\ninterface
    swp6\n ip address 10.0.0.22/32\n ip ospf area 0\n ip ospf network point-to-point\n!\nrouter
    bgp 65000\n bgp router-id 10.0.0.22\n no bgp default ipv4-unicast\n bgp bestpath
    as-path multipath-relax\n neighbor RR peer-group\n neighbor RR remote-as internal\n
    neighbor RR bfd\n neighbor RR advertisement-interval 0\n neighbor RR timers 3
    10\n neighbor RR timers connect 5\n neighbor swp1 interface peer-group RR\n neighbor
    swp2 interface peer-group RR\n neighbor swp3 interface peer-group RR\n neighbor
    swp4 interface peer-group RR\n neighbor swp5 interface peer-group RR\n neighbor
    swp6 interface peer-group RR\n !\n address-family ipv4 unicast\n  neighbor RR
    activate\n  neighbor RR route-reflector-client\n  maximum-paths ibgp 16\n exit-address-family\n
    !\n address-family l2vpn evpn\n  neighbor RR activate\n  neighbor RR route-reflector-client\n
    exit-address-family\n!\nrouter ospf\n ospf router-id 10.0.0.22\n passive-interface
    lo\n!\nline vty\n!\nend\n# ports.conf\n# resolv.conf\nnameserver 192.168.123.1
    # vrf mgmt", "hostname": "spine01", "timestamp": 1622008051479}]'
- command: devconfig show --hostname='leaf01 spine01' --query-str='config.str.contains("10.0.0.21")' --namespace='ospf-single dual-evpn ospf-ibgp'
    --format=json
  data-directory: tests/data/parquet/
  marks: devconfig show cumulus
  output: '[]'
- command: devconfig summarize --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  marks: devconfig summarize cumulus
  output: '{"ospf-ibgp": {"deviceCnt": 9}}'
- command: devconfig summarize --hostname='leaf01 spine01' --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  marks: devconfig summarize cumulus
  output: '{"ospf-ibgp": {"deviceCnt": 2}}'
- command: devconfig unique --columns=config --format=json --namespace='ospf-single dual-evpn ospf-ibgp'
  data-directory: tests/data/parquet/
  error:
    error: '[{"error": "Unique not supported for Device Config"}]'
  marks: devconfig unique cumulus
