description: 'Testing verbs for interface: show summarize unique assert top'
tests:
- command: interface show --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface show
- command: interface show --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface show
  output: '[{"hostname": "server102"}, {"hostname": "server102"}, {"hostname": "server102"},
    {"hostname": "server101"}, {"hostname": "server104"}, {"hostname": "server103"},
    {"hostname": "server103"}, {"hostname": "server103"}, {"hostname": "server104"},
    {"hostname": "server101"}, {"hostname": "server101"}, {"hostname": "server104"},
    {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname":
    "edge01"}, {"hostname": "internet"}, {"hostname": "internet"}, {"hostname": "internet"},
    {"hostname": "internet"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "spine02"}, {"hostname": "exit02"}, {"hostname":
    "spine02"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit02"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "leaf02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit01"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"},
    {"hostname": "spine01"}, {"hostname": "leaf02"}, {"hostname": "spine01"}, {"hostname":
    "leaf04"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine02"},
    {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine01"},
    {"hostname": "leaf04"}, {"hostname": "spine01"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf02"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server101"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server102"}, {"hostname": "server102"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server103"}, {"hostname": "server103"},
    {"hostname": "server103"}, {"hostname": "server101"}, {"hostname": "server103"},
    {"hostname": "server101"}, {"hostname": "server104"}, {"hostname": "server104"},
    {"hostname": "server104"}, {"hostname": "server104"}, {"hostname": "server104"},
    {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname":
    "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"},
    {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"},
    {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}, {"hostname": "spine01"}, {"hostname": "spine01"},
    {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname":
    "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"},
    {"hostname": "leaf03"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "leaf03"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "leaf03"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "leaf03"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "leaf04"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "internet"}, {"hostname": "internet"}, {"hostname":
    "internet"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "server101"},
    {"hostname": "server101"}, {"hostname": "server101"}, {"hostname": "server101"},
    {"hostname": "server101"}, {"hostname": "server103"}, {"hostname": "server103"},
    {"hostname": "server103"}, {"hostname": "server103"}, {"hostname": "server103"},
    {"hostname": "server104"}, {"hostname": "edge01"}, {"hostname": "server104"},
    {"hostname": "server104"}, {"hostname": "server104"}, {"hostname": "edge01"},
    {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname":
    "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"},
    {"hostname": "edge01"}, {"hostname": "server104"}, {"hostname": "server102"},
    {"hostname": "server102"}, {"hostname": "server102"}, {"hostname": "server102"},
    {"hostname": "server102"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"},
    {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname":
    "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "internet"}, {"hostname": "internet"}, {"hostname": "internet"},
    {"hostname": "internet"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "spine02"}, {"hostname": "spine02"},
    {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}]'
- command: interface summarize --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface summarize
  output: '{"ospf-single": {"deviceCnt": 14, "interfaceCnt": 97, "devicesWithL2Cnt":
    4, "devicesWithVxlanCnt": 0, "ifDownCnt": 0, "ifAdminDownCnt": 12, "ifWithMultipleIPCnt":
    0, "uniqueMTUCnt": {"9216": 44, "1500": 30, "65536": 23}, "uniqueIfTypesCnt":
    5, "speedCnt": 4, "ifChangesStat": [0, 1, 0.0], "ifPerDeviceStat": [3, 10, 9.0],
    "uniqueIPv4AddrCnt": 31, "uniqueIPv6AddrCnt": 1}, "dual-evpn": {"deviceCnt": 14,
    "interfaceCnt": 166, "devicesWithL2Cnt": 6, "devicesWithVxlanCnt": 12, "ifDownCnt":
    0, "ifAdminDownCnt": 4, "ifWithMultipleIPCnt": 5, "uniqueMTUCnt": 4, "uniqueIfTypesCnt":
    9, "speedCnt": 5, "ifChangesStat": [0, 7, 0.0], "ifPerDeviceStat": [4, 21, 9.5],
    "uniqueIPv4AddrCnt": 56, "uniqueIPv6AddrCnt": 1}, "ospf-ibgp": {"deviceCnt": 14,
    "interfaceCnt": 178, "devicesWithL2Cnt": 6, "devicesWithVxlanCnt": 14, "ifDownCnt":
    0, "ifAdminDownCnt": 4, "ifWithMultipleIPCnt": 5, "uniqueMTUCnt": 4, "uniqueIfTypesCnt":
    9, "speedCnt": 5, "ifChangesStat": [0, 5, 0.0], "ifPerDeviceStat": [4, 23, 9.5],
    "uniqueIPv4AddrCnt": 60, "uniqueIPv6AddrCnt": 1}}'
- command: interface summarize --namespace=dual-evpn --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface summarize
  output: '{"dual-evpn": {"deviceCnt": 14, "interfaceCnt": 166, "devicesWithL2Cnt":
    6, "devicesWithVxlanCnt": 12, "ifDownCnt": 0, "ifAdminDownCnt": 4, "ifWithMultipleIPCnt":
    5, "uniqueMTUCnt": 4, "uniqueIfTypesCnt": 9, "speedCnt": 5, "ifChangesStat": [0,
    7, 0.0], "ifPerDeviceStat": [4, 21, 9.5], "uniqueIPv4AddrCnt": 56, "uniqueIPv6AddrCnt":
    1}}'
- command: interface unique --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface unique
  output: '[{"type": "bond"}, {"type": "bond_slave"}, {"type": "bridge"}, {"type":
    "ethernet"}, {"type": "loopback"}, {"type": "macvlan"}, {"type": "vlan"}, {"type":
    "vrf"}, {"type": "vxlan"}]'
- command: interface unique --count=True --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface unique
- command: interface unique --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface unique
  output: '[{"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server104"}, {"hostname": "spine01"},
    {"hostname": "spine02"}]'
- command: interface assert --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface assert
- command: interface top --what='statusChangeTimestamp' --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface top
  output: '[{"namespace": "ospf-ibgp", "hostname": "leaf03", "ifname": "bond02", "state":
    "up", "adminState": "up", "type": "bond", "mtu": 9000, "vlan": 0, "master": "bridge",
    "ipAddressList": [], "ip6AddressList": [], "statusChangeTimestamp": 1616706446400,
    "timestamp": 1616681582391}, {"namespace": "ospf-ibgp", "hostname": "leaf03",
    "ifname": "bond01", "state": "up", "adminState": "up", "type": "bond", "mtu":
    9000, "vlan": 0, "master": "bridge", "ipAddressList": [], "ip6AddressList": [],
    "statusChangeTimestamp": 1616706446390, "timestamp": 1616681582391}, {"namespace":
    "ospf-ibgp", "hostname": "leaf03", "ifname": "swp6", "state": "up", "adminState":
    "up", "type": "bond_slave", "mtu": 9000, "vlan": 0, "master": "bond02", "ipAddressList":
    [], "ip6AddressList": [], "statusChangeTimestamp": 1616706446340, "timestamp":
    1616681582391}, {"namespace": "ospf-ibgp", "hostname": "leaf04", "ifname": "bond02",
    "state": "up", "adminState": "up", "type": "bond", "mtu": 9000, "vlan": 0, "master":
    "bridge", "ipAddressList": [], "ip6AddressList": [], "statusChangeTimestamp":
    1616706446340, "timestamp": 1616681582523}, {"namespace": "ospf-ibgp", "hostname":
    "leaf03", "ifname": "swp5", "state": "up", "adminState": "up", "type": "bond_slave",
    "mtu": 9000, "vlan": 0, "master": "bond01", "ipAddressList": [], "ip6AddressList":
    [], "statusChangeTimestamp": 1616706446330, "timestamp": 1616681582391}]'
- command: interface assert --status=pass --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface assert cumulus
- command: interface assert --status=fail --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface assert cumulus
- command: interface assert --status=all --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface assert cumulus
- command: interface assert --status=whatever --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface assert cumulus
  output: '[]'
