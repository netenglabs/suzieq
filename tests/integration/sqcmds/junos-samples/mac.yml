description: 'Testing verbs for mac: show summarize unique'
tests:
- command: mac show --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show junos
  output: '[{"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1606017394122}, {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr":
    "33:33:00:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1606017394122}, {"namespace": "junos", "hostname": "srv11", "vlan":
    0, "macaddr": "33:33:ff:55:12:9d", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1606017394122}, {"namespace": "junos", "hostname":
    "srv11", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif": "eth1", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1606017394122}, {"namespace":
    "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:00:00:00:01", "oif":
    "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1606017394122},
    {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:ff:1c:79:40",
    "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1606017394122}, {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr":
    "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1606017394123}, {"namespace": "junos", "hostname": "srv12", "vlan":
    0, "macaddr": "33:33:00:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1606017394123}, {"namespace": "junos", "hostname":
    "srv12", "vlan": 0, "macaddr": "33:33:ff:55:12:9d", "oif": "eth0", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1606017394123}, {"namespace":
    "junos", "hostname": "srv12", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif":
    "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1606017394123},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1606017394123}, {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr":
    "33:33:ff:e6:1b:e4", "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1606017394123}, {"namespace": "junos", "hostname": "srv21", "vlan":
    0, "macaddr": "33:33:00:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1606017394129}, {"namespace": "junos", "hostname":
    "srv21", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif": "eth1", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1606017394129}, {"namespace":
    "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:ff:f0:3a:5f", "oif":
    "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1606017394129},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1606017394129}, {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr":
    "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1606017394129}, {"namespace": "junos", "hostname": "srv21", "vlan":
    0, "macaddr": "33:33:ff:55:12:9d", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1606017394129}, {"namespace": "junos", "hostname":
    "srv22", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1606017394165}, {"namespace":
    "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:00:00:00:01", "oif":
    "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1606017394165},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1606017394165}, {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr":
    "01:00:5e:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1606017394165}, {"namespace": "junos", "hostname": "srv22", "vlan":
    0, "macaddr": "33:33:00:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1606017394165}, {"namespace": "junos", "hostname":
    "srv22", "vlan": 0, "macaddr": "33:33:ff:88:95:c6", "oif": "eth1", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1606017394165}, {"namespace":
    "junos", "hostname": "vqfx1", "vlan": 200, "macaddr": "08:00:27:e6:1b:e4", "oif":
    "xe-0/0/2.0", "remoteVtepIp": "", "bd": "", "flags": "", "timestamp": 1606017395627},
    {"namespace": "junos", "hostname": "vqfx1", "vlan": 200, "macaddr": "08:00:27:88:95:c6",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp":
    1606017395627}, {"namespace": "junos", "hostname": "vqfx1", "vlan": 200, "macaddr":
    "02:05:86:71:af:00", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2", "bd": "",
    "flags": "remote", "timestamp": 1606017395627}, {"namespace": "junos", "hostname":
    "vqfx1", "vlan": 100, "macaddr": "08:00:27:1c:79:40", "oif": "xe-0/0/1.0", "remoteVtepIp":
    "", "bd": "", "flags": "", "timestamp": 1606017395627}, {"namespace": "junos",
    "hostname": "vqfx1", "vlan": 100, "macaddr": "02:05:86:71:af:00", "oif": "vtep.32769",
    "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp": 1606017395627},
    {"namespace": "junos", "hostname": "vqfx1", "vlan": 100, "macaddr": "08:00:27:f0:3a:5f",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp":
    1606017395627}, {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr":
    "08:00:27:88:95:c6", "oif": "xe-0/0/2.0", "remoteVtepIp": "", "bd": "", "flags":
    "", "timestamp": 1606017396294}, {"namespace": "junos", "hostname": "vqfx2", "vlan":
    100, "macaddr": "02:05:86:71:f8:00", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1",
    "bd": "", "flags": "remote", "timestamp": 1606017396294}, {"namespace": "junos",
    "hostname": "vqfx2", "vlan": 100, "macaddr": "08:00:27:1c:79:40", "oif": "vtep.32769",
    "remoteVtepIp": "9.9.9.1", "bd": "", "flags": "remote", "timestamp": 1606017396294},
    {"namespace": "junos", "hostname": "vqfx2", "vlan": 100, "macaddr": "08:00:27:f0:3a:5f",
    "oif": "xe-0/0/1.0", "remoteVtepIp": "", "bd": "", "flags": "", "timestamp": 1606017396294},
    {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr": "02:05:86:71:f8:00",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "bd": "", "flags": "remote", "timestamp":
    1606017396294}, {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr":
    "08:00:27:e6:1b:e4", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "bd": "",
    "flags": "remote", "timestamp": 1606017396294}]'
- command: mac show --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show junos
  output: '[{"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname":
    "srv11"}, {"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname": "srv12"},
    {"hostname": "srv12"}, {"hostname": "srv12"}, {"hostname": "srv12"}, {"hostname":
    "srv12"}, {"hostname": "srv12"}, {"hostname": "srv21"}, {"hostname": "srv21"},
    {"hostname": "srv21"}, {"hostname": "srv21"}, {"hostname": "srv21"}, {"hostname":
    "srv21"}, {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname": "srv22"},
    {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname":
    "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx1"},
    {"hostname": "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx2"}, {"hostname":
    "vqfx2"}, {"hostname": "vqfx2"}, {"hostname": "vqfx2"}, {"hostname": "vqfx2"},
    {"hostname": "vqfx2"}]'
- command: mac summarize --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac summarize junos
  output: '{"junos": {"deviceCnt": 6, "totalMacsinNSCnt": 36, "uniqueMacCnt": 13,
    "uniqueVlanperHostStat": [2, 2, 2.0]}}'
- command: mac unique --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac unique junos
  output: '[{"hostname": "srv11", "count": 6}, {"hostname": "srv12", "count": 6},
    {"hostname": "srv21", "count": 6}, {"hostname": "srv22", "count": 6}, {"hostname":
    "vqfx1", "count": 6}, {"hostname": "vqfx2", "count": 6}]'
